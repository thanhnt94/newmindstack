{# Stats Enhancement Script #}
{# This script adds click handlers to vocab stat cards and includes Chart.js #}

<!-- Chart.js Library -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

<script>
    // Make vocabulary stat cards clickable using event delegation
    // This handles both initially loaded and dynamically added cards
    document.addEventListener('click', function (e) {
        const statCard = e.target.closest('.vocab-stat');
        if (!statCard) return;

        // Get container info from URL or data attributes
        const pathParts = window.location.pathname.split('/');
        let containerId = pathParts[pathParts.length - 1];

        // Validate containerId is numeric (not "dashboard" or other paths)
        if (!/^\d+$/.test(containerId)) {
            console.warn('Cannot show stats: not on a container detail page');
            return;
        }

        // Get container name from page
        const containerNameEl = document.querySelector('.vocab-detail-title');
        const containerName = containerNameEl ? containerNameEl.textContent.trim() : 'Vocabulary Set';

        // Open modal
        openContainerStatsModal(containerId, containerName);
    });
</script>

<style>
    /* Make stat cards look more clickable */
    .vocab-stat {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .vocab-stat:hover {
        cursor: pointer;
    }

    .vocab-stat:active {
        transform: translateY(-2px) scale(0.98) !important;
    }
</style>

{# components/_flash_msg.html #}
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
<div id="flash-messages-container"
    class="fixed top-4 left-4 right-4 z-[200] flex flex-col space-y-2 pointer-events-none">
    {% for category, message in messages %}
    <div class="flash-message-item pointer-events-auto flex items-center p-4 rounded-2xl shadow-lg relative text-sm font-medium animate-slide-in-top
         {% if category == 'success' %}bg-emerald-500 text-white shadow-emerald-500/30
         {% elif category == 'danger' %}bg-rose-500 text-white shadow-rose-500/30
         {% else %}bg-slate-800 text-white shadow-slate-900/30{% endif %}" onclick="this.remove()">
        <i
            class="fas fa-{{ 'check' if category == 'success' else ('exclamation' if category == 'danger' else 'info') }}-circle mr-3 text-lg"></i>
        <span>{{ message }}</span>
    </div>
    {% endfor %}
</div>
<script>
        (function () {
            setTimeout(function () {
                var messages = document.querySelectorAll('.flash-message-item');
                messages.forEach(function (msg) {
                    msg.style.transition = 'opacity 0.5s ease-out, transform 0.5s ease-out';
                    msg.style.opacity = '0';
                    msg.style.transform = 'translateY(-20px)';
                    setTimeout(function () {
                        if (msg.parentNode) msg.parentNode.removeChild(msg);
                    }, 500);
                });
            }, 3000); // Dismiss after 3 seconds
        })();
</script>
{% endif %}
{% endwith %}

{# ================= MOBILE APP INTERFACE - MODERN FLAT DESIGN ================= #}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

<div class="lg:hidden fixed inset-0 z-[100] flex flex-col h-[100dvh] w-full safe-area-inset-bottom mobile-dashboard"
    style="font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;">

    {# === CLEAN BACKGROUND === #}
    <div class="fixed inset-0 bg-gradient-to-b from-slate-50 to-slate-100 -z-10"></div>

    {# === TOP NAVBAR === #}
    {% include 'main/_navbar_mobile.html' %}

    {# === 2. MAIN CONTENT AREA === #}
    <div class="flex-grow overflow-y-auto overflow-x-hidden p-5 space-y-5 pb-24 relative">

        {# Motivation Card - Modern #}
        {% if motivation_message %}
        <div class="bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-3xl p-5 flex items-start gap-4 active:scale-[0.98] transition-transform cursor-pointer animate-fade-in-up"
            onclick="this.querySelector('p').classList.toggle('line-clamp-2')" style="animation-delay: 0.1s">
            <div
                class="w-12 h-12 rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white flex-shrink-0">
                <i class="fa-solid fa-lightbulb text-xl"></i>
            </div>
            <div class="flex-grow pt-1">
                <h4 class="text-xs font-bold text-blue-700 uppercase tracking-wide mb-2 flex items-center gap-1.5">
                    <span>üí°</span>
                    <span>Focus Today</span>
                </h4>
                <p class="text-sm text-slate-700 font-medium line-clamp-2 leading-relaxed">
                    {{ motivation_message }}
                </p>
            </div>
        </div>
        {% endif %}

        <!-- Stats Cards - Modern -->
        <div class="grid grid-cols-2 gap-4">
            <!-- Points Card -->
            <div class="bg-gradient-to-br from-indigo-600 to-purple-700 rounded-3xl p-6 text-white animate-fade-in-up"
                style="animation-delay: 0.2s">
                <div class="flex items-center gap-2 mb-3">
                    <div class="w-9 h-9 rounded-xl bg-white/20 flex items-center justify-center">
                        <i class="fa-solid fa-star text-yellow-300 text-base"></i>
                    </div>
                    <p class="text-xs font-bold uppercase tracking-wider opacity-90">ƒêi·ªÉm th∆∞·ªüng</p>
                </div>
                <p class="text-4xl font-black tracking-tight">{{ "{:,}".format(score_cards[0].value) if score_cards else
                    0 }}</p>
                <div class="mt-4 h-2 bg-white/20 rounded-full overflow-hidden">
                    <div class="h-full bg-white/50 rounded-full transition-all duration-1000" style="width: 75%"></div>
                </div>
            </div>

            <!-- Learned Card -->
            <div class="bg-white border border-slate-200 rounded-3xl p-6 flex flex-col justify-center animate-fade-in-up"
                style="animation-delay: 0.3s">
                <div class="flex items-center gap-2 mb-3">
                    <div
                        class="w-9 h-9 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center">
                        <i class="fa-solid fa-book-open text-white text-sm"></i>
                    </div>
                    <p class="text-xs font-bold uppercase tracking-wider text-slate-500">ƒê√£ h·ªçc</p>
                </div>
                <p class="text-4xl font-black text-slate-900 tracking-tight">
                    {{ "{:,}".format(score_cards[1].value) if score_cards|length > 1 else 0 }}
                </p>
            </div>
        </div>

        <!-- Focus/Goal Section - Modern -->
        <div>
            <div class="flex items-center justify-between mb-4 px-1">
                <h3 class="text-sm font-bold text-slate-800 tracking-tight flex items-center gap-2">
                    <span>üéØ</span>
                    <span>Ti√™u ƒëi·ªÉm h√¥m nay</span>
                </h3>
            </div>
            {% if goal_progress %}
            {% set main_goal = goal_progress[0] %}
            <div class="bg-white border border-slate-200 p-6 rounded-3xl animate-fade-in-up"
                style="animation-delay: 0.4s">
                <div class="flex justify-between items-start mb-4">
                    <div class="flex items-center gap-3">
                        <div
                            class="w-10 h-10 rounded-2xl bg-gradient-to-br from-purple-600 to-pink-600 flex items-center justify-center">
                            <i class="fa-solid fa-bullseye text-white text-base"></i>
                        </div>
                        <span class="text-base font-bold text-slate-900">{{ main_goal.title }}</span>
                    </div>
                    <span class="text-lg font-black text-purple-600">{{ main_goal.percent }}%</span>
                </div>
                <div class="w-full bg-slate-100 rounded-full h-3 mb-4 overflow-hidden">
                    <div class="bg-gradient-to-r from-purple-600 to-pink-600 h-3 rounded-full transition-all duration-1000"
                        style="width: {{ main_goal.percent }}%"></div>
                </div>
                <p class="text-sm text-slate-600 font-medium">
                    ‚ú® ƒê√£ ho√†n th√†nh <span class="font-black text-purple-600">{{ main_goal.current_value }}</span>/{{
                    main_goal.target_value }} {{ main_goal.unit }} h√¥m nay
                </p>
            </div>
            {% else %}
            <a href="{{ url_for('content_management.content_dashboard') }}"
                class="block bg-gradient-to-br from-slate-800 to-slate-900 text-white p-6 rounded-3xl animate-fade-in-up hover:scale-[1.02] transition-transform"
                style="animation-delay: 0.4s">
                <div class="flex items-center gap-3 mb-3">
                    <div
                        class="w-12 h-12 rounded-2xl bg-gradient-to-br from-purple-600 to-pink-600 flex items-center justify-center">
                        <i class="fa-solid fa-pen-nib text-white text-xl"></i>
                    </div>
                    <h4 class="font-black text-lg">Studio S√°ng T·∫°o</h4>
                </div>
                <p class="text-sm text-slate-300 font-medium leading-relaxed">
                    B·∫Øt ƒë·∫ßu t·∫°o b·ªô th·∫ª v√† n·ªôi dung h·ªçc t·∫≠p m·ªõi ngay b√¢y gi·ªù! ‚ú®
                </p>
            </a>
            {% endif %}
        </div>
    </div>

    {# === 3. BOTTOM TAB BAR === #}
    {% set active_page = 'home' %}
    {% include 'main/_bottom_nav_mobile.html' %}

</div>

<style>
    /* Animations */
    @keyframes slide-in-left {
        from {
            opacity: 0;
            transform: translateX(-20px);
        }

        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    @keyframes slide-in-right {
        from {
            opacity: 0;
            transform: translateX(20px);
        }

        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    @keyframes fade-in-up {
        from {
            opacity: 0;
            transform: translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .animate-slide-in-left {
        animation: slide-in-left 0.5s ease-out;
    }

    .animate-slide-in-right {
        animation: slide-in-right 0.5s ease-out;
    }

    .animate-fade-in-up {
        animation: fade-in-up 0.6s ease-out backwards;
    }

    /* Smooth scrolling */
    .mobile-dashboard {
        scroll-behavior: smooth;
    }

    /* Line clamp utility */
    .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
</style>
{# File: mindstack_app/modules/shared/templates/includes/_search_form_mobile.html #}
{# Mobile version of search form #}

{% macro render_search_form_mobile(search_query=None, search_field='all', placeholder="Tìm kiếm...", set_id=None,
search_options=None) %}
<form method="GET" action="{{ url_for(request.endpoint, **({'set_id': set_id} if set_id is not none else {})) }}"
    class="flex flex-col space-y-2 w-full">
    {# Changed to flex-col for mobile stacking if needed, but keeping row for now as it fits #}
    <div class="flex items-center space-x-2 w-full">
        {# Ô chọn trường tìm kiếm #}
        {% if search_options %}
        <select name="search_field"
            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 max-w-[35%] truncate">
            {% for value, display_text in search_options.items() %}
            <option value="{{ value }}" {% if search_field==value %}selected{% endif %}>{{ display_text }}</option>
            {% endfor %}
        </select>
        {% else %}
        <select name="search_field"
            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 hidden">
            <option value="all" {% if search_field=='all' %}selected{% endif %}>Tất cả</option>
        </select>
        {% endif %}

        {# Ô nhập liệu #}
        <input type="text" name="q" value="{{ search_query if search_query else '' }}" placeholder="{{ placeholder }}"
            class="block flex-grow px-4 py-2 border border-blue-100 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 min-w-0 bg-blue-50/50">

        {# Nút tìm kiếm #}
        <button type="submit"
            class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-300 flex items-center shadow-md">
            <i class="fas fa-search"></i>
        </button>
    </div>
</form>
{% endmacro %}
{#
File: mindstack_app/templates/lumina/components/_card.html
Purpose: Card component macro with variants and sections
#}

{#
Card Macro
Usage:
{% call card(title='Card Title', subtitle='Subtitle', elevated=True) %}
<p>Card content here</p>
{% endcall %}
#}
{% macro card(title=None, subtitle=None, elevated=False, clickable=False, href=None, classes='', id=None) %}
{% set card_classes = 'card' %}
{% if elevated %}{% set card_classes = card_classes ~ ' card--elevated' %}{% endif %}
{% if clickable %}{% set card_classes = card_classes ~ ' card--clickable' %}{% endif %}
{% set card_classes = card_classes ~ ' ' ~ classes %}

{% if href %}
<a href="{{ href }}" class="{{ card_classes }}" {% if id %}id="{{ id }}" {% endif %}>
    {% else %}
    <div class="{{ card_classes }}" {% if id %}id="{{ id }}" {% endif %}>
        {% endif %}
        {% if title or subtitle %}
        <div class="card__header">
            <div>
                {% if title %}<h3 class="card__title">{{ title }}</h3>{% endif %}
                {% if subtitle %}<p class="card__subtitle">{{ subtitle }}</p>{% endif %}
            </div>
        </div>
        {% endif %}

        <div class="card__body">
            {{ caller() if caller else '' }}
        </div>
        {% if href %}
</a>
{% else %}
</div>
{% endif %}
{% endmacro %}

{# Stats Card Macro - For dashboard stats #}
{% macro stats_card(title, value, icon=None, color='primary', change=None, change_positive=True) %}
<div class="card card--elevated">
    <div style="display: flex; justify-content: space-between; align-items: flex-start;">
        <div>
            <p style="font-size: var(--font-size-sm); color: var(--lumina-text-muted); margin-bottom: var(--space-1);">
                {{ title }}</p>
            <p
                style="font-size: var(--font-size-2xl); font-weight: var(--font-weight-bold); color: var(--lumina-text);">
                {{ value }}</p>
            {% if change %}
            <p
                style="font-size: var(--font-size-xs); margin-top: var(--space-2); color: {% if change_positive %}var(--lumina-success){% else %}var(--lumina-danger){% endif %};">
                <i class="fas {% if change_positive %}fa-arrow-up{% else %}fa-arrow-down{% endif %}"></i>
                {{ change }}
            </p>
            {% endif %}
        </div>
        {% if icon %}
        <div style="width: 48px; height: 48px; border-radius: var(--radius-lg); display: flex; align-items: center; justify-content: center; font-size: 1.25rem;
                    {% if color == 'primary' %}background: var(--lumina-primary-light); color: var(--lumina-primary);
                    {% elif color == 'success' %}background: #d1fae5; color: #059669;
                    {% elif color == 'warning' %}background: #fef3c7; color: #d97706;
                    {% elif color == 'danger' %}background: #fee2e2; color: #dc2626;
                    {% elif color == 'info' %}background: #cffafe; color: #0891b2;
                    {% endif %}">
            <i class="fas {{ icon }}"></i>
        </div>
        {% endif %}
    </div>
</div>
{% endmacro %}

{# Activity Card Macro - For recent items #}
{% macro activity_card(title, subtitle, icon=None, href=None, badge=None, badge_color='primary') %}
<a href="{{ href or '#' }}" class="card card--clickable"
    style="display: flex; align-items: center; gap: var(--space-3); padding: var(--space-4);">
    {% if icon %}
    <div
        style="width: 40px; height: 40px; border-radius: var(--radius-lg); background: var(--lumina-primary-light); color: var(--lumina-primary); display: flex; align-items: center; justify-content: center;">
        <i class="fas {{ icon }}"></i>
    </div>
    {% endif %}
    <div style="flex: 1; min-width: 0;">
        <p
            style="font-weight: var(--font-weight-medium); color: var(--lumina-text); white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
            {{ title }}</p>
        <p style="font-size: var(--font-size-sm); color: var(--lumina-text-muted);">{{ subtitle }}</p>
    </div>
    {% if badge %}
    <span class="badge badge--{{ badge_color }}">{{ badge }}</span>
    {% endif %}
</a>
{% endmacro %}
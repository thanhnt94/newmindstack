{#
File: mindstack_app/templates/lumina/pages/dashboard/_mobile.html
Purpose: Mobile dashboard - App-like full-screen interface
Based on aura mobile design patterns
#}
{% set _v = template_version or 'lumina' %}

{# === MOBILE APP INTERFACE === #}
<div class="lumina-mobile-app">

    {# === STICKY HEADER === #}
    <div class="lumina-mobile-header">
        <div class="lumina-mobile-header__user">
            <div class="lumina-mobile-header__avatar">
                {% if current_user.is_authenticated and current_user.avatar_url %}
                <img src="{{ current_user.get_avatar_url() }}" alt="Avatar">
                {% else %}
                <span>{{ current_user.username[0] | upper if current_user.is_authenticated else 'G' }}</span>
                {% endif %}
            </div>
            <div>
                <h1 class="lumina-mobile-header__title">
                    Hi, {{ current_user.username if current_user.is_authenticated else 'B·∫°n' }}! üëã
                </h1>
                <p class="lumina-mobile-header__subtitle">Ch√∫c b·∫°n h·ªçc t·ªët h√¥m nay!</p>
            </div>
        </div>
        <div class="lumina-mobile-header__actions">
            <button class="lumina-mobile-header__badge" onclick="toggleNotificationCenter()">
                <i class="fa-solid fa-bell"></i>
            </button>
            <div class="lumina-mobile-header__stat">
                <i class="fa-solid fa-gem"></i>
                <span>{{ "{:,}".format(current_user.total_score if current_user.is_authenticated and
                    current_user.total_score else 0) }}</span>
            </div>
        </div>
    </div>

    {# === SCROLLABLE CONTENT === #}
    <div class="lumina-mobile-content">

        {# === HERO CARD === #}
        <div class="lumina-hero-card">
            <div class="lumina-hero-card__icon">
                <i class="fa-solid fa-brain"></i>
            </div>
            <div class="lumina-hero-card__content">
                <span class="lumina-hero-card__badge">üöÄ Ti√™u ƒëi·ªÉm</span>
                <p class="lumina-hero-card__text">H·ªçc m·ªói ng√†y ƒë·ªÉ duy tr√¨ streak v√† c·∫£i thi·ªán tr√≠ nh·ªõ d√†i h·∫°n!</p>
            </div>
        </div>

        {# === QUICK ACTIONS === #}
        <div class="lumina-section">
            <div class="lumina-section__header">
                <h3 class="lumina-section__title">
                    <span>‚ö°</span> H·ªçc ngay
                </h3>
            </div>
            <div class="lumina-quick-scroll">
                <a href="{{ url_for('learning.vocabulary.dashboard') }}"
                    class="lumina-quick-card lumina-quick-card--vocab">
                    <div class="lumina-quick-card__icon">
                        <i class="fa-solid fa-book-open"></i>
                    </div>
                    <div class="lumina-quick-card__text">
                        <h4>Vocabulary</h4>
                        <p>T·ª´ v·ª±ng & Flashcard</p>
                    </div>
                </a>
                <a href="{{ url_for('learning.quiz_learning.dashboard') }}"
                    class="lumina-quick-card lumina-quick-card--quiz">
                    <div class="lumina-quick-card__icon">
                        <i class="fa-solid fa-circle-question"></i>
                    </div>
                    <div class="lumina-quick-card__text">
                        <h4>Quiz</h4>
                        <p>Tr·∫Øc nghi·ªám</p>
                    </div>
                </a>
                <a href="{{ url_for('learning.practice.practice_hub') }}"
                    class="lumina-quick-card lumina-quick-card--practice">
                    <div class="lumina-quick-card__icon">
                        <i class="fa-solid fa-dumbbell"></i>
                    </div>
                    <div class="lumina-quick-card__text">
                        <h4>Practice</h4>
                        <p>√în t·∫≠p ƒëa b·ªô</p>
                    </div>
                </a>
                <a href="{{ url_for('learning.course.course_learning_dashboard') }}"
                    class="lumina-quick-card lumina-quick-card--course">
                    <div class="lumina-quick-card__icon">
                        <i class="fa-solid fa-graduation-cap"></i>
                    </div>
                    <div class="lumina-quick-card__text">
                        <h4>Course</h4>
                        <p>Kh√≥a h·ªçc</p>
                    </div>
                </a>
            </div>
        </div>

        {# === ACTIVE SESSIONS === #}
        <div class="lumina-section" id="lumina-active-sessions" style="display: none;">
            <div class="lumina-section__header">
                <h3 class="lumina-section__title">
                    <span>üî•</span> ƒêang h·ªçc d·ªü
                </h3>
            </div>
            <div id="lumina-active-list" class="lumina-active-list"></div>
        </div>

        {# === STATS GRID === #}
        <div class="lumina-section">
            <div class="lumina-section__header">
                <h3 class="lumina-section__title">
                    <span>üìä</span> Th·ªëng k√™ h√¥m nay
                </h3>
            </div>
            <div class="lumina-stats-grid">
                <div class="lumina-stat-card">
                    <div class="lumina-stat-card__value">0</div>
                    <div class="lumina-stat-card__label">T·ª´ ƒë√£ h·ªçc</div>
                </div>
                <div class="lumina-stat-card">
                    <div class="lumina-stat-card__value">0 ng√†y</div>
                    <div class="lumina-stat-card__label">Streak</div>
                </div>
            </div>
        </div>

        {# === EXPLORE === #}
        <div class="lumina-section">
            <div class="lumina-section__header">
                <h3 class="lumina-section__title">
                    <span>üéØ</span> Kh√°m ph√° th√™m
                </h3>
            </div>
            <div class="lumina-explore-grid">
                <a href="{{ url_for('stats.dashboard') }}" class="lumina-explore-card">
                    <div class="lumina-explore-card__icon" style="background: #06b6d4;">
                        <i class="fa-solid fa-chart-line"></i>
                    </div>
                    <span>Th·ªëng k√™</span>
                </a>
                <a href="{{ url_for('goals.manage_goals') }}" class="lumina-explore-card">
                    <div class="lumina-explore-card__icon" style="background: #f59e0b;">
                        <i class="fa-solid fa-bullseye"></i>
                    </div>
                    <span>M·ª•c ti√™u</span>
                </a>
                <a href="{{ url_for('content_management.content_dashboard') }}" class="lumina-explore-card">
                    <div class="lumina-explore-card__icon" style="background: #8b5cf6;">
                        <i class="fa-solid fa-folder-open"></i>
                    </div>
                    <span>N·ªôi dung</span>
                </a>
                <a href="{{ url_for('notes.manage_notes') }}" class="lumina-explore-card">
                    <div class="lumina-explore-card__icon" style="background: #ec4899;">
                        <i class="fa-solid fa-sticky-note"></i>
                    </div>
                    <span>Ghi ch√∫</span>
                </a>
            </div>
        </div>

        {# Bottom spacer for nav #}
        <div style="height: 100px;"></div>
    </div>
</div>

<style>
    /* === Mobile App Container === */
    .lumina-mobile-app {
        position: fixed;
        inset: 0;
        display: flex;
        flex-direction: column;
        background: var(--lumina-bg);
        z-index: 50;
    }

    /* === Sticky Header === */
    .lumina-mobile-header {
        position: sticky;
        top: 0;
        z-index: 20;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 16px 20px;
        background: rgba(248, 250, 252, 0.9);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
    }

    .lumina-mobile-header__user {
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .lumina-mobile-header__avatar {
        width: 44px;
        height: 44px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--lumina-primary), var(--lumina-secondary));
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 700;
        font-size: 18px;
        overflow: hidden;
        border: 2px solid white;
        box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3);
    }

    .lumina-mobile-header__avatar img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .lumina-mobile-header__title {
        font-size: 18px;
        font-weight: 700;
        color: var(--lumina-text);
        line-height: 1.2;
    }

    .lumina-mobile-header__subtitle {
        font-size: 12px;
        color: var(--lumina-text-muted);
        margin-top: 2px;
    }

    .lumina-mobile-header__actions {
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .lumina-mobile-header__badge {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        background: white;
        border: 1px solid var(--lumina-border);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--lumina-text-muted);
        font-size: 14px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    }

    .lumina-mobile-header__stat {
        display: flex;
        align-items: center;
        gap: 6px;
        background: white;
        padding: 6px 12px;
        border-radius: 20px;
        border: 1px solid var(--lumina-border);
        font-size: 12px;
        font-weight: 600;
        color: var(--lumina-text);
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    }

    .lumina-mobile-header__stat i {
        color: #3b82f6;
    }

    /* === Scrollable Content === */
    .lumina-mobile-content {
        flex: 1;
        overflow-y: auto;
        overflow-x: hidden;
        padding: 0 20px 120px;
        -webkit-overflow-scrolling: touch;
    }

    .lumina-mobile-content::-webkit-scrollbar {
        display: none;
    }

    /* === Hero Card === */
    .lumina-hero-card {
        position: relative;
        background: linear-gradient(135deg, var(--lumina-primary), var(--lumina-secondary));
        border-radius: 24px;
        padding: 24px;
        margin-bottom: 24px;
        color: white;
        overflow: hidden;
        box-shadow: 0 8px 24px rgba(99, 102, 241, 0.3);
    }

    .lumina-hero-card__icon {
        position: absolute;
        top: 16px;
        right: 16px;
        opacity: 0.15;
        font-size: 64px;
    }

    .lumina-hero-card__content {
        position: relative;
        z-index: 1;
    }

    .lumina-hero-card__badge {
        display: inline-block;
        background: rgba(255, 255, 255, 0.2);
        padding: 4px 12px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 12px;
    }

    .lumina-hero-card__text {
        font-size: 15px;
        font-weight: 500;
        line-height: 1.5;
    }

    /* === Section === */
    .lumina-section {
        margin-bottom: 28px;
    }

    .lumina-section__header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 16px;
    }

    .lumina-section__title {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 15px;
        font-weight: 700;
        color: var(--lumina-text);
    }

    /* === Quick Scroll === */
    .lumina-quick-scroll {
        display: flex;
        gap: 12px;
        overflow-x: auto;
        margin: 0 -20px;
        padding: 4px 20px 8px;
        scroll-snap-type: x mandatory;
        -webkit-overflow-scrolling: touch;
    }

    .lumina-quick-scroll::-webkit-scrollbar {
        display: none;
    }

    .lumina-quick-card {
        flex-shrink: 0;
        width: 140px;
        height: 120px;
        background: white;
        border-radius: 20px;
        padding: 16px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        border: 1px solid var(--lumina-border-light);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        scroll-snap-align: start;
        transition: transform 0.2s, box-shadow 0.2s;
    }

    .lumina-quick-card:active {
        transform: scale(0.96);
    }

    .lumina-quick-card__icon {
        width: 40px;
        height: 40px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        color: white;
    }

    .lumina-quick-card--vocab .lumina-quick-card__icon {
        background: linear-gradient(135deg, #3b82f6, #6366f1);
    }

    .lumina-quick-card--quiz .lumina-quick-card__icon {
        background: linear-gradient(135deg, #10b981, #14b8a6);
    }

    .lumina-quick-card--practice .lumina-quick-card__icon {
        background: linear-gradient(135deg, #f59e0b, #f97316);
    }

    .lumina-quick-card--course .lumina-quick-card__icon {
        background: linear-gradient(135deg, #8b5cf6, #a855f7);
    }

    .lumina-quick-card__text h4 {
        font-size: 14px;
        font-weight: 700;
        color: var(--lumina-text);
        margin-bottom: 2px;
    }

    .lumina-quick-card__text p {
        font-size: 11px;
        color: var(--lumina-text-muted);
    }

    /* === Active Sessions List === */
    .lumina-active-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
    }

    /* === Stats Grid === */
    .lumina-stats-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
    }

    .lumina-stat-card {
        background: white;
        border-radius: 20px;
        padding: 20px;
        text-align: center;
        border: 1px solid var(--lumina-border-light);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
    }

    .lumina-stat-card__value {
        font-size: 28px;
        font-weight: 800;
        color: var(--lumina-primary);
        margin-bottom: 4px;
    }

    .lumina-stat-card__label {
        font-size: 11px;
        font-weight: 600;
        color: var(--lumina-text-muted);
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    /* === Explore Grid === */
    .lumina-explore-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 12px;
    }

    .lumina-explore-card {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
        padding: 12px 8px;
        background: white;
        border-radius: 16px;
        border: 1px solid var(--lumina-border-light);
        transition: transform 0.2s;
    }

    .lumina-explore-card:active {
        transform: scale(0.95);
    }

    .lumina-explore-card__icon {
        width: 44px;
        height: 44px;
        border-radius: 14px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 18px;
    }

    .lumina-explore-card span {
        font-size: 11px;
        font-weight: 600;
        color: var(--lumina-text);
        text-align: center;
    }
</style>
{#
File: mindstack_app/templates/lumina/pages/dashboard/_desktop.html
Purpose: Desktop dashboard - iOS-style with larger elements and glass effects
#}
{% set _v = template_version or 'lumina' %}
{% from _v ~ '/components/_card.html' import stats_card %}
{% from _v ~ '/components/_button.html' import button %}

{# === iOS-Style Desktop Dashboard === #}
<div class="ios-dashboard">

    {# === Welcome Header === #}
    <div class="ios-dashboard__header">
        <div>
            <h1 class="ios-dashboard__title">
                Xin ch√†o, {{ current_user.username if current_user.is_authenticated else 'B·∫°n' }} üëã
            </h1>
            <p class="ios-dashboard__subtitle">Ch√†o m·ª´ng b·∫°n quay tr·ªü l·∫°i! H√£y ti·∫øp t·ª•c h√†nh tr√¨nh h·ªçc t·∫≠p nh√©.</p>
        </div>
    </div>

    {# === Stats Section === #}
    <div class="ios-section">
        <h2 class="ios-section__title">üìä T·ªïng quan</h2>
        <div class="ios-stats-grid">
            <div class="ios-stat-card ios-stat-card--primary">
                <div class="ios-stat-card__icon">
                    <i class="fa-solid fa-gem"></i>
                </div>
                <div class="ios-stat-card__content">
                    <span class="ios-stat-card__value">{{ "{:,}".format(current_user.total_score if
                        current_user.is_authenticated and current_user.total_score else 0) }}</span>
                    <span class="ios-stat-card__label">ƒêi·ªÉm t√≠ch l≈©y</span>
                </div>
            </div>
            <div class="ios-stat-card ios-stat-card--success">
                <div class="ios-stat-card__icon">
                    <i class="fa-solid fa-book"></i>
                </div>
                <div class="ios-stat-card__content">
                    <span class="ios-stat-card__value">0</span>
                    <span class="ios-stat-card__label">T·ª´ ƒë√£ h·ªçc h√¥m nay</span>
                </div>
            </div>
            <div class="ios-stat-card ios-stat-card--warning">
                <div class="ios-stat-card__icon">
                    <i class="fa-solid fa-fire"></i>
                </div>
                <div class="ios-stat-card__content">
                    <span class="ios-stat-card__value">0</span>
                    <span class="ios-stat-card__label">Ng√†y streak li√™n ti·∫øp</span>
                </div>
            </div>
            <div class="ios-stat-card ios-stat-card--info">
                <div class="ios-stat-card__icon">
                    <i class="fa-solid fa-clock"></i>
                </div>
                <div class="ios-stat-card__content">
                    <span class="ios-stat-card__value">0h</span>
                    <span class="ios-stat-card__label">Th·ªùi gian h·ªçc</span>
                </div>
            </div>
        </div>
    </div>

    {# === Quick Access Section === #}
    <div class="ios-section">
        <h2 class="ios-section__title">‚ö° Truy c·∫≠p nhanh</h2>
        <div class="ios-action-grid">
            <a href="{{ url_for('learning.vocabulary.dashboard') }}" class="ios-action-card">
                <div class="ios-action-card__icon" style="background: linear-gradient(135deg, #007AFF, #5856D6);">
                    <i class="fa-solid fa-book-open"></i>
                </div>
                <div class="ios-action-card__content">
                    <h3>T·ª´ v·ª±ng</h3>
                    <p>Flashcard & SRS</p>
                </div>
                <i class="fa-solid fa-chevron-right ios-action-card__arrow"></i>
            </a>

            <a href="{{ url_for('learning.quiz_learning.dashboard') }}" class="ios-action-card">
                <div class="ios-action-card__icon" style="background: linear-gradient(135deg, #34C759, #30D158);">
                    <i class="fa-solid fa-circle-question"></i>
                </div>
                <div class="ios-action-card__content">
                    <h3>Quiz</h3>
                    <p>Tr·∫Øc nghi·ªám ki·∫øn th·ª©c</p>
                </div>
                <i class="fa-solid fa-chevron-right ios-action-card__arrow"></i>
            </a>

            <a href="{{ url_for('learning.practice.practice_hub') }}" class="ios-action-card">
                <div class="ios-action-card__icon" style="background: linear-gradient(135deg, #FF9500, #FF6B00);">
                    <i class="fa-solid fa-dumbbell"></i>
                </div>
                <div class="ios-action-card__content">
                    <h3>Luy·ªán t·∫≠p</h3>
                    <p>√în nhi·ªÅu b·ªô th·∫ª</p>
                </div>
                <i class="fa-solid fa-chevron-right ios-action-card__arrow"></i>
            </a>

            <a href="{{ url_for('learning.course.course_learning_dashboard') }}" class="ios-action-card">
                <div class="ios-action-card__icon" style="background: linear-gradient(135deg, #AF52DE, #BF5AF2);">
                    <i class="fa-solid fa-graduation-cap"></i>
                </div>
                <div class="ios-action-card__content">
                    <h3>Kh√≥a h·ªçc</h3>
                    <p>H·ªçc theo l·ªô tr√¨nh</p>
                </div>
                <i class="fa-solid fa-chevron-right ios-action-card__arrow"></i>
            </a>
        </div>
    </div>

    {# === Active Sessions === #}
    <div class="ios-section" id="ios-active-sessions" style="display: none;">
        <h2 class="ios-section__title">üî• Phi√™n h·ªçc ƒëang d·ªü</h2>
        <div id="ios-active-list" class="ios-card-group"></div>
    </div>

    {# === Tools Section === #}
    <div class="ios-section">
        <h2 class="ios-section__title">üõ†Ô∏è C√¥ng c·ª• h·ªØu √≠ch</h2>
        <div class="ios-tools-grid">
            <a href="{{ url_for('stats.dashboard') }}" class="ios-tool-card">
                <div class="ios-tool-card__icon" style="background: #5AC8FA;">
                    <i class="fa-solid fa-chart-line"></i>
                </div>
                <span>Th·ªëng k√™</span>
            </a>
            <a href="{{ url_for('goals.manage_goals') }}" class="ios-tool-card">
                <div class="ios-tool-card__icon" style="background: #FF9500;">
                    <i class="fa-solid fa-bullseye"></i>
                </div>
                <span>M·ª•c ti√™u</span>
            </a>
            <a href="{{ url_for('content_management.content_dashboard') }}" class="ios-tool-card">
                <div class="ios-tool-card__icon" style="background: #AF52DE;">
                    <i class="fa-solid fa-folder-open"></i>
                </div>
                <span>N·ªôi dung</span>
            </a>
            <a href="{{ url_for('notes.manage_notes') }}" class="ios-tool-card">
                <div class="ios-tool-card__icon" style="background: #FF2D55;">
                    <i class="fa-solid fa-sticky-note"></i>
                </div>
                <span>Ghi ch√∫</span>
            </a>
        </div>
    </div>
</div>

<style>
    /* === iOS Dashboard Styles === */
    .ios-dashboard {
        max-width: 1200px;
        margin: 0 auto;
        padding: var(--space-6);
    }

    .ios-dashboard__header {
        margin-bottom: var(--space-8);
    }

    .ios-dashboard__title {
        font-size: var(--font-size-3xl);
        font-weight: var(--font-weight-bold);
        color: var(--lumina-text);
        margin-bottom: var(--space-2);
        letter-spacing: -0.02em;
    }

    .ios-dashboard__subtitle {
        font-size: var(--font-size-lg);
        color: var(--lumina-text-muted);
    }

    /* Section */
    .ios-section {
        margin-bottom: var(--space-8);
    }

    .ios-section__title {
        font-size: var(--font-size-xl);
        font-weight: var(--font-weight-semibold);
        color: var(--lumina-text);
        margin-bottom: var(--space-5);
    }

    /* Stats Grid */
    .ios-stats-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: var(--space-5);
    }

    @media (max-width: 1200px) {
        .ios-stats-grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    .ios-stat-card {
        background: var(--lumina-surface);
        border-radius: var(--radius-2xl);
        padding: var(--space-6);
        display: flex;
        align-items: center;
        gap: var(--space-5);
        box-shadow: var(--shadow-md);
        transition: transform var(--transition-fast), box-shadow var(--transition-fast);
    }

    .ios-stat-card:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
    }

    .ios-stat-card__icon {
        width: 56px;
        height: 56px;
        border-radius: var(--radius-xl);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        color: white;
        flex-shrink: 0;
    }

    .ios-stat-card--primary .ios-stat-card__icon {
        background: linear-gradient(135deg, #007AFF, #5856D6);
    }

    .ios-stat-card--success .ios-stat-card__icon {
        background: linear-gradient(135deg, #34C759, #30D158);
    }

    .ios-stat-card--warning .ios-stat-card__icon {
        background: linear-gradient(135deg, #FF9500, #FF6B00);
    }

    .ios-stat-card--info .ios-stat-card__icon {
        background: linear-gradient(135deg, #5AC8FA, #64D2FF);
    }

    .ios-stat-card__content {
        display: flex;
        flex-direction: column;
        gap: var(--space-1);
    }

    .ios-stat-card__value {
        font-size: var(--font-size-2xl);
        font-weight: var(--font-weight-bold);
        color: var(--lumina-text);
    }

    .ios-stat-card__label {
        font-size: var(--font-size-sm);
        color: var(--lumina-text-muted);
    }

    /* Action Grid */
    .ios-action-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: var(--space-4);
    }

    @media (max-width: 1100px) {
        .ios-action-grid {
            grid-template-columns: 1fr;
        }
    }

    .ios-action-card {
        background: var(--lumina-surface);
        border-radius: var(--radius-2xl);
        padding: var(--space-5);
        display: flex;
        align-items: center;
        gap: var(--space-5);
        box-shadow: var(--shadow-md);
        transition: all var(--transition-fast);
    }

    .ios-action-card:hover {
        transform: translateX(4px);
        box-shadow: var(--shadow-lg);
    }

    .ios-action-card__icon {
        width: 56px;
        height: 56px;
        border-radius: var(--radius-xl);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        color: white;
        flex-shrink: 0;
    }

    .ios-action-card__content {
        flex: 1;
    }

    .ios-action-card__content h3 {
        font-size: var(--font-size-lg);
        font-weight: var(--font-weight-semibold);
        color: var(--lumina-text);
        margin-bottom: var(--space-1);
    }

    .ios-action-card__content p {
        font-size: var(--font-size-sm);
        color: var(--lumina-text-muted);
    }

    .ios-action-card__arrow {
        color: var(--lumina-text-muted);
        font-size: 1rem;
    }

    /* Tools Grid */
    .ios-tools-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: var(--space-4);
    }

    @media (max-width: 900px) {
        .ios-tools-grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    .ios-tool-card {
        background: var(--lumina-surface);
        border-radius: var(--radius-2xl);
        padding: var(--space-6);
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: var(--space-4);
        box-shadow: var(--shadow-md);
        transition: all var(--transition-fast);
        text-align: center;
    }

    .ios-tool-card:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
    }

    .ios-tool-card__icon {
        width: 64px;
        height: 64px;
        border-radius: var(--radius-xl);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.75rem;
        color: white;
    }

    .ios-tool-card span {
        font-size: var(--font-size-base);
        font-weight: var(--font-weight-semibold);
        color: var(--lumina-text);
    }

    /* Card Group for Active Sessions */
    .ios-card-group {
        display: flex;
        flex-direction: column;
        gap: var(--space-3);
    }
</style>
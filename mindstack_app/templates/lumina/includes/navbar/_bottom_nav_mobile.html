{#
File: mindstack_app/templates/lumina/includes/navbar/_bottom_nav_mobile.html
Purpose: Mobile bottom navigation bar and floating learning menu
#}

{# === Learning Menu Overlay === #}
<div id="lumina-learn-overlay" class="lumina-menu-overlay"></div>

{# === Learning Menu (Floating Cards) === #}
<div id="lumina-learn-menu" class="lumina-menu-popup">
    <div class="lumina-menu-content">
        {# Brand Header #}
        <div class="lumina-menu-header">
            <div class="lumina-menu-brand-icon">
                <i class="fa-solid fa-brain"></i>
            </div>
            <h2 class="lumina-menu-title">MindStack</h2>
        </div>

        {# Menu Grid #}
        <div class="lumina-menu-grid">
            <a href="{{ url_for('learning.vocabulary.dashboard') }}" class="lumina-menu-item"
                style="--item-color-bg: #E0F2FE; --item-color-text: #0284C7;">
                <div class="lumina-menu-icon">
                    <i class="fa-solid fa-book-open"></i>
                </div>
                <span>Vocabulary</span>
            </a>

            <a href="{{ url_for('learning.quiz_learning.dashboard') }}" class="lumina-menu-item"
                style="--item-color-bg: #DCFCE7; --item-color-text: #16A34A;">
                <div class="lumina-menu-icon">
                    <i class="fa-solid fa-circle-question"></i>
                </div>
                <span>Quiz</span>
            </a>

            <a href="{{ url_for('learning.practice.practice_hub') }}" class="lumina-menu-item"
                style="--item-color-bg: #FEF3C7; --item-color-text: #D97706;">
                <div class="lumina-menu-icon">
                    <i class="fa-solid fa-dumbbell"></i>
                </div>
                <span>Practice</span>
            </a>

            <a href="{{ url_for('learning.course.course_learning_dashboard') }}" class="lumina-menu-item"
                style="--item-color-bg: #F3E8FF; --item-color-text: #9333EA;">
                <div class="lumina-menu-icon">
                    <i class="fa-solid fa-graduation-cap"></i>
                </div>
                <span>Course</span>
            </a>
        </div>
    </div>
</div>

{# === Bottom Navigation Bar === #}
<nav class="lumina-bottomnav">
    {# Home #}
    <a href="{{ url_for('dashboard.dashboard') }}"
        class="lumina-bottomnav__item {% if active_page == 'home' or request.endpoint == 'dashboard.dashboard' %}active{% endif %}">
        <i class="fa-solid fa-house"></i>
        <span>Home</span>
    </a>

    {# Goals #}
    <a href="{{ url_for('goals.manage_goals') }}"
        class="lumina-bottomnav__item {% if active_page == 'goals' %}active{% endif %}">
        <i class="fa-solid fa-bullseye"></i>
        <span>Mục tiêu</span>
    </a>

    {# Learn (Center Floating Button) #}
    <div class="lumina-bottomnav__learn">
        <button id="lumina-learn-btn" class="lumina-bottomnav__learn-btn">
            <i class="fa-solid fa-plus"></i>
        </button>
    </div>

    {# Stats #}
    <a href="{{ url_for('stats.dashboard') }}"
        class="lumina-bottomnav__item {% if active_page == 'stats' %}active{% endif %}">
        <i class="fa-solid fa-chart-line"></i>
        <span>Thống kê</span>
    </a>

    {# Profile #}
    <a href="{{ url_for('user_profile.view_profile') }}"
        class="lumina-bottomnav__item {% if active_page == 'profile' %}active{% endif %}">
        <i class="fa-solid fa-user"></i>
        <span>Cá nhân</span>
    </a>
</nav>

<style>
    /* === Bottom Nav Override === */
    .lumina-bottomnav {
        background: #FFFFFF !important;
        /* Force solid white per user request */
        backdrop-filter: none !important;
        border-top: 1px solid rgba(0, 0, 0, 0.05) !important;
    }

    /* === Overlay === */
    .lumina-menu-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.4);
        backdrop-filter: blur(4px);
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
    }

    .lumina-menu-overlay.is-visible {
        opacity: 1;
        visibility: visible;
    }

    /* === Popup Menu === */
    .lumina-menu-popup {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.9);
        z-index: 1001;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        width: 90%;
        max-width: 320px;
    }

    .lumina-menu-popup.is-visible {
        opacity: 1;
        visibility: visible;
        transform: translate(-50%, -50%) scale(1);
    }

    .lumina-menu-content {
        background: white;
        border-radius: 24px;
        padding: 24px;
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 20px;
    }

    /* Header */
    .lumina-menu-header {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 12px;
    }

    .lumina-menu-brand-icon {
        width: 56px;
        height: 56px;
        background: linear-gradient(135deg, #007AFF, #5856D6);
        border-radius: 18px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 28px;
        color: white;
        box-shadow: 0 4px 15px rgba(0, 122, 255, 0.3);
    }

    .lumina-menu-title {
        font-size: 20px;
        font-weight: 800;
        color: #1C1C1E;
    }

    /* Grid */
    .lumina-menu-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
        width: 100%;
    }

    .lumina-menu-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: var(--item-color-bg);
        color: var(--item-color-text);
        padding: 16px;
        border-radius: 20px;
        gap: 8px;
        transition: transform 0.2s;
    }

    .lumina-menu-item:active {
        transform: scale(0.95);
    }

    .lumina-menu-icon {
        font-size: 24px;
    }

    .lumina-menu-item span {
        font-size: 13px;
        font-weight: 600;
    }

    /* Center Button Icon Rotate */
    .lumina-bottomnav__learn-btn i {
        transition: transform 0.3s ease;
    }

    .lumina-bottomnav__learn-btn.is-active i {
        transform: rotate(45deg);
    }

    /* Hide everything on desktop */
    @media (min-width: 1024px) {

        .lumina-menu-overlay,
        .lumina-menu-popup {
            display: none !important;
        }
    }
</style>
{# File: Mindstack/web/mindstack_app/templates/includes/_pagination.html #}
{# Mục đích: Macro Jinja2 chung để hiển thị các nút phân trang. #}
{# Sử dụng: {% from 'includes/_pagination.html' import render_pagination %} #}
{#          {{ render_pagination(pagination=pagination, search_query=search_query) }} #}

{% macro render_pagination(pagination, search_query=None) %}
<div class="flex justify-center items-center space-x-2 mt-6">
    {# Nút "Trang trước" #}
    {% if pagination.has_prev %}
    <a href="{{ url_for(request.endpoint, page=pagination.prev_num, q=search_query) }}" 
       class="px-3 py-1 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition duration-300">
        &laquo;
    </a>
    {% else %}
    <span class="px-3 py-1 rounded-md border border-gray-200 text-gray-400 cursor-not-allowed">
        &laquo;
    </span>
    {% endif %}

    {# Các nút số trang #}
    {% for page_num in pagination.iter_pages(left_edge=1, right_edge=1, left_current=2, right_current=2) %}
        {% if page_num %}
            {% if page_num == pagination.page %}
            <span class="px-3 py-1 rounded-md border border-blue-500 bg-blue-500 text-white">
                {{ page_num }}
            </span>
            {% else %}
            <a href="{{ url_for(request.endpoint, page=page_num, q=search_query) }}" 
               class="px-3 py-1 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition duration-300">
                {{ page_num }}
            </a>
            {% endif %}
        {% else %}
        <span class="px-3 py-1 text-gray-700">...</span>
        {% endif %}
    {% endfor %}

    {# Nút "Trang sau" #}
    {% if pagination.has_next %}
    <a href="{{ url_for(request.endpoint, page=pagination.next_num, q=search_query) }}" 
       class="px-3 py-1 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition duration-300">
        &raquo;
    </a>
    {% else %}
    <span class="px-3 py-1 rounded-md border border-gray-200 text-gray-400 cursor-not-allowed">
        &raquo;
    </span>
    {% endif %}
</div>
{% endmacro %}

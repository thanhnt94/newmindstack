{#
Shared Learning Session Header

Usage:
{% set session_config = {
'type': 'flashcard',
'label': 'Flashcard',
'icon': 'fas fa-clone',
'color': 'linear-gradient(135deg, #f97316, #ea580c)',
'exit_url': url_for('learning.vocabulary.dashboard')
} %}
{% set session_stats = [
{'label': 'Tiến độ', 'id': 'progress-display', 'value': '0/0', 'class': ''},
{'label': 'Đúng', 'id': 'live-correct', 'value': '0', 'class': 'correct'},
{'label': 'Sai', 'id': 'live-wrong', 'value': '0', 'class': 'wrong'}
] %}
{% include 'shared/includes/_session_header.html' %}
#}

<style>
    /* ===== Shared Session Header Styles ===== */
    .session-header {
        position: sticky;
        top: 0;
        z-index: 40;
        background: white;
        border-bottom: 1px solid #e2e8f0;
        padding: 0;
    }

    /* Context Bar */
    .session-context-bar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0.5rem 0.75rem;
        background: #f8fafc;
        border-bottom: 1px solid #e2e8f0;
    }

    .session-context-pill {
        display: inline-flex;
        align-items: center;
        gap: 0.375rem;
        padding: 0.25rem 0.625rem;
        color: white;
        font-size: 0.625rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        border-radius: 100px;
    }

    .session-nav-btns {
        display: flex;
        gap: 0.5rem;
    }

    .session-nav-btn {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: #f1f5f9;
        border: none;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #64748b;
        text-decoration: none;
        transition: all 0.2s;
        cursor: pointer;
        font-size: 0.75rem;
    }

    .session-nav-btn:hover {
        background: #e2e8f0;
        color: #334155;
    }

    .session-nav-btn:active {
        background: #cbd5e1;
    }

    /* Stats Row */
    .session-stats-row {
        display: flex;
        align-items: center;
        padding: 0.75rem 1rem;
        gap: 0.75rem;
        background: white;
    }

    .session-stat-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        flex-shrink: 0;
    }

    .session-stat-label {
        font-size: 0.625rem;
        font-weight: 700;
        color: #94a3b8;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    .session-stat-value {
        font-size: 1rem;
        font-weight: 900;
        color: #1e293b;
        font-variant-numeric: tabular-nums;
    }

    .session-stat-value.correct {
        color: #10b981;
    }

    .session-stat-value.wrong {
        color: #ef4444;
    }

    .session-stat-value.learned {
        color: #10b981;
    }

    .session-stat-value.relearn {
        color: #f97316;
    }

    .session-stat-divider {
        width: 1px;
        height: 24px;
        background: #e2e8f0;
        flex-shrink: 0;
    }

    .session-title-group {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        overflow: hidden;
    }

    .session-title-label {
        font-size: 0.625rem;
        font-weight: 700;
        color: #94a3b8;
        text-transform: uppercase;
    }

    .session-title-text {
        font-size: 0.8125rem;
        font-weight: 700;
        color: #334155;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 100%;
    }
</style>

<header class="session-header">
    <!-- Context Bar -->
    <div class="session-context-bar">
        <span class="session-context-pill" style="background: {{ session_config.color }}">
            <i class="{{ session_config.icon }}"></i>
            <span>{{ session_config.label }}</span>
        </span>
        <div class="session-nav-btns">
            {% block session_extra_buttons %}{% endblock %}
            <a href="/" class="session-nav-btn" title="Trang chủ">
                <i class="fas fa-house"></i>
            </a>
            <a href="{{ session_config.exit_url }}" class="session-nav-btn" title="Thoát">
                <i class="fas fa-right-from-bracket"></i>
            </a>
        </div>
    </div>

    <!-- Stats Row -->
    <div class="session-stats-row">
        {% for stat in session_stats %}
        <div class="session-stat-item">
            <span class="session-stat-label">{{ stat.label }}</span>
            <span class="session-stat-value {{ stat.class }}" id="{{ stat.id }}">{{ stat.value }}</span>
        </div>
        {% if not loop.last %}<div class="session-stat-divider"></div>{% endif %}
        {% endfor %}
        <div class="session-stat-divider"></div>
        <div class="session-title-group">
            <span class="session-title-label">Bộ thẻ</span>
            <span class="session-title-text js-session-title">{{ container_title }}</span>
        </div>
    </div>
</header>
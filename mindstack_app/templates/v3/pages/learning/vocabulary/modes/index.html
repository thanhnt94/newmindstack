{# Modes Selection Template - Wizard Style #}
{% extends "v3/base.html" %}
{% block title %}Chọn chế độ học - {{ container.title }}{% endblock %}
{% block head %}
{{ super() }}
<style>
    :root {
        --primary: #4f46e5;
        /* Indigo 600 */
        --primary-bg: #eef2ff;
        /* Indigo 50 */
        --surface: #ffffff;
        --background: #f8fafc;
        --text-main: #0f172a;
        --text-sub: #64748b;
        --border: #e2e8f0;
        --radius: 24px;
        --shadow-sm: 0 4px 6px -1px rgb(0 0 0 / 0.05);
        --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
    }

    body {
        background: var(--background);
        font-family: 'Outfit', 'Inter', sans-serif;
    }

    .wizard-container {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        max-width: 800px;
        /* Slightly wider for grid */
        margin: 0 auto;
        background: var(--background);
    }

    /* Header with Visual Interest */
    .wizard-header {
        padding: 0.75rem 1.5rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(16px);
        -webkit-backdrop-filter: blur(16px);
        border-bottom: 1px solid rgba(226, 232, 240, 0.6);
        position: sticky;
        top: 0;
        z-index: 50;
        transition: all 0.3s ease;
    }

    /* Subtle gradient accent bar at top of header */
    .wizard-header::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(90deg, #3b82f6, #10b981, #f59e0b, #ec4899);
    }

    .nav-btn {
        width: 38px;
        height: 38px;
        border-radius: 10px;
        background: white;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--text-main);
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        text-decoration: none;
        border: 1px solid rgba(226, 232, 240, 0.8);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.02);
    }

    .nav-btn:hover {
        background: var(--primary-bg);
        border-color: var(--primary);
        color: var(--primary);
        transform: translateY(-2px);
        box-shadow: 0 8px 16px -4px rgba(79, 70, 229, 0.2);
    }

    .header-title-box {
        display: flex;
        flex-direction: column;
        align-items: center;
        line-height: 1.2;
        gap: 2px;
    }

    .header-badge {
        font-size: 0.7rem;
        font-weight: 700;
        text-transform: uppercase;
        color: #3b82f6;
        /* Blue like the image */
        letter-spacing: 0.05em;
        display: flex;
        align-items: center;
        gap: 6px;
    }

    .header-badge i {
        font-size: 0.8em;
    }

    .header-title {
        font-size: 1.1rem;
        font-weight: 700;
        color: var(--text-main);
        letter-spacing: -0.01em;
        max-width: 300px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        text-align: center;
    }

    /* Content */
    .modes-content {
        padding: 1.5rem;
        flex: 1;
        max-width: 900px;
        margin: 0 auto;
        width: 100%;
        box-sizing: border-box;
    }

    .hero-text {
        text-align: center;
        margin-bottom: 3rem;
    }

    .hero-text h1 {
        font-size: 2rem;
        font-weight: 800;
        color: var(--text-main);
        margin: 0 0 0.5rem 0;
        letter-spacing: -0.02em;
        background: linear-gradient(135deg, #0f172a 0%, #4f46e5 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .hero-text p {
        color: var(--text-sub);
        font-size: 1rem;
        margin: 0;
        opacity: 0.9;
    }

    /* Grid */
    .modes-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.25rem;
    }

    .mode-card {
        background: var(--surface);
        border-radius: 16px;
        border: 1px solid transparent;
        padding: 1.25rem;
        display: flex;
        align-items: center;
        gap: 1rem;
        text-decoration: none;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.05);
        position: relative;
        overflow: hidden;
    }

    .mode-card:hover {
        transform: translateY(-6px);
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }

    .mode-icon-box {
        width: 48px;
        height: 48px;
        border-radius: 14px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.25rem;
        color: white;
        flex-shrink: 0;
        transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
    }

    .mode-card:hover .mode-icon-box {
        transform: scale(1.1) rotate(-8deg);
    }

    .mode-info {
        flex: 1;
    }

    .mode-name {
        font-size: 1.05rem;
        font-weight: 700;
        color: var(--text-main);
        display: block;
        margin-bottom: 0.15rem;
        transition: color 0.2s;
    }

    .mode-desc {
        font-size: 0.95rem;
        color: var(--text-sub);
        line-height: 1.5;
    }

    .mode-arrow {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        background: var(--background);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--text-sub);
        transition: all 0.3s;
        opacity: 0.6;
    }

    .mode-card:hover .mode-arrow {
        opacity: 1;
        transform: translateX(4px);
        color: white;
    }

    /* --- MODE COLOR THEMES --- */

    /* 1. Flashcard - Green (Sync with Session) */
    .mode-flashcard .mode-icon-box {
        background: linear-gradient(135deg, #10b981, #34d399);
        box-shadow: 0 8px 20px -4px rgba(16, 185, 129, 0.4);
    }

    .mode-flashcard:hover {
        border-color: #10b981;
        box-shadow: 0 20px 40px -10px rgba(16, 185, 129, 0.25);
    }

    .mode-flashcard:hover .mode-name {
        color: #059669;
    }

    .mode-flashcard:hover .mode-arrow {
        background: #10b981;
    }

    /* 2. MCQ - Indigo (Sync with Session) */
    .mode-mcq .mode-icon-box {
        background: linear-gradient(135deg, #6366f1, #818cf8);
        box-shadow: 0 8px 20px -4px rgba(99, 102, 241, 0.4);
    }

    .mode-mcq:hover {
        border-color: #4f46e5;
        box-shadow: 0 20px 40px -10px rgba(79, 70, 229, 0.25);
    }

    .mode-mcq:hover .mode-name {
        color: #4f46e5;
    }

    .mode-mcq:hover .mode-arrow {
        background: #4f46e5;
    }

    /* 3. Typing - Amber/Orange */
    .mode-typing .mode-icon-box {
        background: linear-gradient(135deg, #d97706, #fbbf24);
        box-shadow: 0 8px 20px -4px rgba(245, 158, 11, 0.4);
    }

    .mode-typing:hover {
        border-color: #f59e0b;
        box-shadow: 0 20px 40px -10px rgba(245, 158, 11, 0.25);
    }

    .mode-typing:hover .mode-name {
        color: #d97706;
    }

    .mode-typing:hover .mode-arrow {
        background: #f59e0b;
    }

    /* 4. Listening - Purple */
    .mode-listening .mode-icon-box {
        background: linear-gradient(135deg, #7c3aed, #a78bfa);
        box-shadow: 0 8px 20px -4px rgba(139, 92, 246, 0.4);
    }

    .mode-listening:hover {
        border-color: #8b5cf6;
        box-shadow: 0 20px 40px -10px rgba(139, 92, 246, 0.25);
    }

    .mode-listening:hover .mode-name {
        color: #7c3aed;
    }

    .mode-listening:hover .mode-arrow {
        background: #8b5cf6;
    }

    /* 5. Speed - Orange Red */
    .mode-speed .mode-icon-box {
        background: linear-gradient(135deg, #ea580c, #fb923c);
        box-shadow: 0 8px 20px -4px rgba(249, 115, 22, 0.4);
    }

    .mode-speed:hover {
        border-color: #f97316;
        box-shadow: 0 20px 40px -10px rgba(249, 115, 22, 0.25);
    }

    .mode-speed:hover .mode-name {
        color: #ea580c;
    }

    .mode-speed:hover .mode-arrow {
        background: #f97316;
    }
</style>
{% endblock %}

{% block content %}
<div class="wizard-container">
    <div class="wizard-header">
        <a href="{{ url_for('learning.vocabulary.set_detail_page', set_id=container.container_id) }}" class="nav-btn">
            <i class="fas fa-chevron-left"></i>
        </a>
        <div class="header-title-box">
            <div class="header-badge">
                <i class="fas fa-layer-group"></i> CHẾ ĐỘ HỌC
            </div>
            <div class="header-title">{{ container.title }}</div>
        </div>
        <div style="width: 40px;"></div> <!-- Spacer -->
    </div>

    <div class="modes-content">
        <div class="hero-text">
            <h1>Chọn cách học của bạn</h1>
            <p>Khám phá các phương pháp ghi nhớ hiệu quả</p>
        </div>

        <div class="modes-grid">
            <!-- Flashcard -->
            <a href="{{ url_for('learning.flashcard_learning.setup', set_id=container.container_id) }}"
                class="mode-card mode-flashcard">
                <div class="mode-icon-box"><i class="fas fa-clone"></i></div>
                <div class="mode-info">
                    <span class="mode-name">Flashcard</span>
                    <span class="mode-desc">Lật thẻ truyền thống, phù hợp để ghi nhớ mặt chữ.</span>
                </div>
                <div class="mode-arrow"><i class="fas fa-arrow-right"></i></div>
            </a>

            <!-- MCQ -->
            <a href="{{ url_for('learning.vocabulary.set_mcq_page', set_id=container.container_id) }}"
                class="mode-card mode-mcq">
                <div class="mode-icon-box"><i class="fas fa-list-ul"></i></div>
                <div class="mode-info">
                    <span class="mode-name">Trắc nghiệm</span>
                    <span class="mode-desc">Chọn đáp án đúng, kiểm tra phản xạ nhanh.</span>
                </div>
                <div class="mode-arrow"><i class="fas fa-arrow-right"></i></div>
            </a>

            <!-- Typing (New URL pattern) -->
            <a href="{{ url_for('learning.vocabulary.typing.setup', set_id=container.container_id) }}"
                class="mode-card mode-typing">
                <div class="mode-icon-box"><i class="fas fa-keyboard"></i></div>
                <div class="mode-info">
                    <span class="mode-name">Luyện viết</span>
                    <span class="mode-desc">Luyện viết chính tả chính xác từng ký tự.</span>
                </div>
                <div class="mode-arrow"><i class="fas fa-arrow-right"></i></div>
            </a>

            <!-- Listening -->
            <a href="{{ url_for('learning.vocabulary.listening.setup', set_id=container.container_id) }}"
                class="mode-card mode-listening">
                <div class="mode-icon-box"><i class="fas fa-headphones"></i></div>
                <div class="mode-info">
                    <span class="mode-name">Luyện nghe</span>
                    <span class="mode-desc">Nghe và chép lại (Dictation).</span>
                </div>
                <div class="mode-arrow"><i class="fas fa-arrow-right"></i></div>
            </a>

        </div>
    </div>
</div>
{% endblock %}
{# File: mindstack_app/modules/shared/templates/includes/_pagination_desktop.html #}
{# Desktop version of pagination #}

{% macro render_pagination_desktop(pagination, search_query=None, set_id=None, search_field=None, current_filter=None)
%}
<div class="flex justify-center items-center space-x-2 mt-6 pagination">
    {# Nút "Trang trước" #}
    {% if pagination.has_prev %}
    {% set url_params = {'page': pagination.prev_num, 'q': search_query, 'search_field': search_field, 'filter':
    current_filter} %}
    {% if set_id is not none %}{% set _ = url_params.update({'set_id': set_id}) %}{% endif %}
    <a href="{{ url_for(request.endpoint, **url_params) }}"
        class="px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition duration-300">
        &laquo; Trước
    </a>
    {% else %}
    <span class="px-4 py-2 rounded-md border border-gray-200 text-gray-400 cursor-not-allowed">
        &laquo; Trước
    </span>
    {% endif %}

    {# Các nút số trang #}
    {% for page_num in pagination.iter_pages(left_edge=1, right_edge=1, left_current=2, right_current=2) %}
    {% if page_num %}
    {% if page_num == pagination.page %}
    <span class="px-4 py-2 rounded-md border border-blue-600 bg-blue-600 text-white font-medium shadow-sm">
        {{ page_num }}
    </span>
    {% else %}
    {% set url_params = {'page': page_num, 'q': search_query, 'search_field': search_field, 'filter': current_filter} %}
    {% if set_id is not none %}{% set _ = url_params.update({'set_id': set_id}) %}{% endif %}
    <a href="{{ url_for(request.endpoint, **url_params) }}"
        class="px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition duration-300 font-medium">
        {{ page_num }}
    </a>
    {% endif %}
    {% else %}
    <span class="px-3 py-2 text-gray-500">...</span>
    {% endif %}
    {% endfor %}

    {# Nút "Trang sau" #}
    {% if pagination.has_next %}
    {% set url_params = {'page': pagination.next_num, 'q': search_query, 'search_field': search_field, 'filter':
    current_filter} %}
    {% if set_id is not none %}{% set _ = url_params.update({'set_id': set_id}) %}{% endif %}
    <a href="{{ url_for(request.endpoint, **url_params) }}"
        class="px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition duration-300">
        Sau &raquo;
    </a>
    {% else %}
    <span class="px-4 py-2 rounded-md border border-gray-200 text-gray-400 cursor-not-allowed">
        Sau &raquo;
    </span>
    {% endif %}
</div>
{% endmacro %}
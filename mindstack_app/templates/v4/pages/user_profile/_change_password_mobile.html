{# ================= CHANGE PASSWORD MOBILE ================= #}
{% set _v = template_version|default('v4') %}
<div class="lg:hidden fixed inset-0 z-[100] flex flex-col h-[100dvh] w-full safe-area-inset-bottom mobile-dashboard"
    style="font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;">

    <div class="fixed inset-0 bg-gradient-to-b from-slate-50 to-slate-100 -z-10"></div>

    <div
        class="bg-white/90 backdrop-blur-md border-b border-slate-200 sticky top-0 z-20 px-4 py-3 pb-2 flex items-center justify-between">
        <a href="{{ url_for('user_profile.edit_profile') }}"
            class="w-10 h-10 flex items-center justify-center text-slate-500 hover:text-indigo-600 transition-colors">
            <i class="fa-solid fa-arrow-left text-xl"></i>
        </a>
        <h1 class="text-lg font-black text-slate-800">Đổi mật khẩu</h1>
        <div class="w-10"></div>
    </div>

    <div class="flex-grow overflow-y-auto p-5 space-y-6">
        <div class="text-center">
            <div
                class="w-16 h-16 bg-indigo-100 rounded-2xl flex items-center justify-center mx-auto mb-4 text-indigo-600">
                <i class="fa-solid fa-shield-halved text-3xl"></i>
            </div>
            <h2 class="text-xl font-bold text-slate-900">Bảo mật tài khoản</h2>
            <p class="text-sm text-slate-500">Mật khẩu mới nên có ít nhất 8 ký tự</p>
        </div>

        <form method="post" class="space-y-4">
            {{ form.csrf_token }}

            <div
                class="bg-white border border-slate-200 rounded-3xl p-2 shadow-sm focus-within:ring-2 focus-within:ring-indigo-500 transition-all">
                <div class="px-4 pt-2">
                    <label class="block text-xs font-bold text-slate-400 uppercase tracking-wide">Mật khẩu hiện
                        tại</label>
                    {{ form.old_password(class="block w-full py-2 text-base font-bold text-slate-900 bg-transparent
                    border-none focus:ring-0", placeholder="••••••••") }}
                </div>
            </div>
            {% if form.old_password.errors %}
            <div class="pl-4 text-rose-500 text-xs font-medium">{% for error in form.old_password.errors %}{{ error }}{%
                endfor %}</div>
            {% endif %}

            <div
                class="bg-white border border-slate-200 rounded-3xl p-2 shadow-sm focus-within:ring-2 focus-within:ring-indigo-500 transition-all">
                <div class="px-4 pt-2">
                    <label class="block text-xs font-bold text-slate-400 uppercase tracking-wide">Mật khẩu mới</label>
                    {{ form.password(class="block w-full py-2 text-base font-bold text-slate-900 bg-transparent
                    border-none focus:ring-0", placeholder="••••••••") }}
                </div>
            </div>
            {% if form.password.errors %}
            <div class="pl-4 text-rose-500 text-xs font-medium">{% for error in form.password.errors %}{{ error }}{%
                endfor %}</div>
            {% endif %}

            <div
                class="bg-white border border-slate-200 rounded-3xl p-2 shadow-sm focus-within:ring-2 focus-within:ring-indigo-500 transition-all">
                <div class="px-4 pt-2">
                    <label class="block text-xs font-bold text-slate-400 uppercase tracking-wide">Xác nhận mật khẩu
                        mới</label>
                    {{ form.password2(class="block w-full py-2 text-base font-bold text-slate-900 bg-transparent
                    border-none focus:ring-0", placeholder="••••••••") }}
                </div>
            </div>
            {% if form.password2.errors %}
            <div class="pl-4 text-rose-500 text-xs font-medium">{% for error in form.password2.errors %}{{ error }}{%
                endfor %}</div>
            {% endif %}

            <button type="submit"
                class="w-full flex items-center justify-center gap-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-4 rounded-2xl shadow-lg font-bold text-lg mt-8">
                <i class="fa-solid fa-key"></i>
                <span>Cập nhật mật khẩu</span>
            </button>
        </form>
    </div>

    {% include _v ~ '/includes/navbar/_bottom_nav_mobile.html' %}
</div>
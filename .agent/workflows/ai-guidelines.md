---
description: AI Guidelines - Quy tắc bắt buộc khi AI làm việc với MindStack project
---

Tài liệu này quy định các tiêu chuẩn thiết kế Backend, tập trung vào tính module hóa toàn diện và hỗ trợ kiến trúc đa giao diện (Multi-theme).1. Cấu trúc Hạt nhân (Kernel) vs ModuleA. Hệ thống lõi (Kernel - Ngoài Module)/core/: Hạ tầng Flask (Bootstrap, Registry, Signals). bootstrap.py cấu hình định tuyến cho cả Theme Assets và Media Uploads./models/: Định nghĩa Database tập trung, đặt tên theo module (ví dụ: audio.py) để tránh import vòng./logics/: Thuật toán thuần túy (Stateless)./services/: Quản lý tài nguyên hệ thống (ví dụ: template_service.py để chọn theme từ DB)./utils/: Công cụ kỹ thuật (Excel parser, Sanitizer).B. Cấu trúc Module (/modules/)routes.py: Chỉ sử dụng đường dẫn template tương đối (ví dụ: auth/login.html).services/: Tương tác DB và điều phối logic.logics/: Xử lý nghiệp vụ đặc thù của module.2. Quản lý Tài nguyên (Storage Architecture)Hệ thống phân biệt rõ 2 loại tài nguyên:A. Theme Assets (Tài nguyên giao diện)Bản chất: Là một phần của mã nguồn (Stateless).Vị trí: templates/[theme_name]/assets/ (Chứa JS, CSS, Favicon, Logo).Phục vụ: Qua route /theme-assets/[theme]/....B. Media Uploads (Dữ liệu người dùng)Bản chất: Dữ liệu sinh ra hoặc upload (Audio TTS, Ảnh thẻ, Avatar).Vị trí: Folder /uploads/ nằm ngoài mã nguồn để đảm bảo an toàn khi cập nhật code.Phục vụ: Qua route /media/....3. Quy trình xử lý Dữ liệu sinh ra (Persistence)Kiểm tra link trong Database (ví dụ: card.audio_url).Nếu trống -> Gọi Service sinh file mới.Lưu file vào /uploads/.Cập nhật link mới vào Database và Commit.Tài liệu này định hình cách Backend cung cấp dữ liệu cho Frontend một cách sạch sẽ nhất.